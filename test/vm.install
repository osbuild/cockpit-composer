#!/bin/sh
# image-customize script to enable cockpit and osbuild-composer in test VMs
# The application RPM will be installed separately
set -eux

# Allow cockpit port (9090) in INPUT chain
# Do not reload firewall rule during image generation
if type firewall-cmd >/dev/null 2>&1; then
    firewall-cmd --add-service=cockpit --permanent
fi

# Make cockpit.socket auto-start when system started
systemctl enable --now cockpit.socket

# Make osbuild-composer.socket auto-start when system started
systemctl enable --now osbuild-composer.socket
